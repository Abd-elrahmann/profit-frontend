import{u as j,r as m,j as e,B as d,H as b,M as w,T as y,a as p,I as S,b as I,c as C,d as B,C as k,A as v,n as A,e as P,h as T}from"./index-2TEkS4Tk.js";import{F as z,c as W,a as L,b as u}from"./index.esm-Q7QO3LVB.js";import{C as E,a as F}from"./CardContent-DkLJ4Reg.js";import{I as M}from"./InputAdornment-BbJSv7Lk.js";const V=W().shape({email:u().trim().email("البريد الإلكتروني غير صالح").required("البريد الإلكتروني مطلوب"),password:u().trim().required("كلمة المرور مطلوبة")}),J=()=>{const x=j(),[l,h]=m.useState(!1),[i,c]=m.useState(!1),f=()=>h(!l),g=async t=>{c(!0);try{const s={...t,email:t.email.trim()},a=await v.post("/api/auth/login",s),{accessToken:r,user:o,role:n}=a.data;localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(o)),n?.permissions&&localStorage.setItem("permissions",JSON.stringify(n.permissions)),A("تم تسجيل الدخول بنجاح"),x("/dashboard",{replace:!0})}catch(s){P("خطأ في تسجيل الدخول"),T(s)}finally{c(!1)}};return e.jsxs(d,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f8f9fa 0%, #e3f2fd 100%)",padding:2},children:[e.jsxs(b,{children:[e.jsx("title",{children:"تسجيل الدخول"}),e.jsx("meta",{name:"description",content:"تسجيل الدخول لنظام إدارة السلف"})]}),e.jsx(E,{sx:{maxWidth:450,width:"100%",boxShadow:"0 8px 32px rgba(0,0,0,0.1)",borderRadius:3},children:e.jsxs(F,{sx:{p:4},children:[e.jsxs(d,{sx:{textAlign:"center",mb:4},children:[e.jsx(w,{style:{fontSize:40,color:"#1976d2",marginBottom:10}}),e.jsx(y,{gutterBottom:!0,sx:{fontSize:24,fontWeight:600,color:"#1976d2"},children:"نظام إدارة السلف"})]}),e.jsx(z,{initialValues:{email:"",password:""},validationSchema:V,onSubmit:g,children:({values:t,errors:s,touched:a,handleChange:r,handleBlur:o,handleSubmit:n})=>e.jsx(L,{onSubmit:n,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(p,{fullWidth:!0,label:"البريد الإلكتروني",name:"email",value:t.email,onChange:r,onBlur:o,error:a.email&&!!s.email,helperText:a.email&&s.email,variant:"outlined",InputLabelProps:{shrink:!0},autoComplete:"username",disabled:i}),e.jsx(p,{fullWidth:!0,label:"كلمة المرور",name:"password",type:l?"text":"password",value:t.password,onChange:r,onBlur:o,error:a.password&&!!s.password,helperText:a.password&&s.password,variant:"outlined",autoComplete:"current-password",disabled:i,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(M,{position:"end",sx:{shrink:!0},children:e.jsx(S,{onClick:f,children:l?e.jsx(I,{size:20}):e.jsx(C,{size:20})})})}}),e.jsx(B,{type:"submit",fullWidth:!0,variant:"contained",disabled:i,sx:{py:1.5,fontWeight:500,fontSize:"1rem"},children:i?e.jsx(k,{size:24,sx:{color:"#fff"}}):"تسجيل الدخول"})]})})})]})})]})};export{J as default};
//# sourceMappingURL=Login-gaUevvSF.js.map
