{"version":3,"file":"Investors-Rrzt-vSi.js","sources":["../../src/components/ContractPreview.jsx","../../src/components/ContractGenerator.jsx","../../src/components/modals/AddInvestor.jsx","../../src/pages/Investors/Investors.jsx"],"sourcesContent":["import React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  IconButton,\r\n  Paper,\r\n  Divider,\r\n} from '@mui/material';\r\nimport { Close as CloseIcon, Print, Download } from '@mui/icons-material';\r\n\r\nconst ContractPreview = ({ \r\n  open, \r\n  onClose, \r\n  contractHtml, \r\n  onGeneratePDF, \r\n  loading = false,\r\n  contractTitle = \"معاينة العقد\"\r\n}) => {\r\n  return (\r\n    <Dialog \r\n      open={open} \r\n      onClose={onClose}\r\n      maxWidth=\"sm\"\r\n      fullScreen={true}\r\n      fullWidth\r\n      dir=\"rtl\"\r\n      PaperProps={{\r\n        sx: {\r\n          borderRadius: 2,\r\n          maxHeight: '100vh'\r\n        }\r\n      }}\r\n    >\r\n      <DialogTitle \r\n        className=\"no-print\"\r\n        sx={{ \r\n          display: 'flex', \r\n          justifyContent: 'space-between', \r\n          alignItems: 'center',\r\n          pb: 1,\r\n          borderBottom: '1px solid #e0e0e0',\r\n          '@media print': {\r\n            display: 'none !important'\r\n          }\r\n        }}\r\n      >\r\n        <Typography variant=\"h6\" fontWeight=\"bold\">\r\n          {contractTitle}\r\n        </Typography>\r\n        <IconButton onClick={onClose} size=\"small\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n\r\n      <DialogContent sx={{ \r\n        p: 0,\r\n        '@media print': {\r\n          p: 0,\r\n          m: 0\r\n        }\r\n      }}>\r\n        <Paper \r\n          id=\"contract-preview\"\r\n          sx={{ \r\n            m: 3, \r\n            p: 4, \r\n            minHeight: '500px',\r\n            bgcolor: 'white',\r\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n            border: '1px solid #e0e0e0',\r\n            '@media print': {\r\n              m: 0,\r\n              p: 2,\r\n              boxShadow: 'none',\r\n              border: 'none',\r\n              minHeight: 'auto'\r\n            }\r\n          }}\r\n        >\r\n          {contractHtml ? (\r\n            <Box\r\n              dangerouslySetInnerHTML={{ __html: contractHtml }}\r\n              sx={{\r\n                '& *': {\r\n                  fontFamily: '\"Noto Sans Arabic\", \"Cairo\", \"Segoe UI\", sans-serif !important',\r\n                  lineHeight: 1.8\r\n                },\r\n                '& h1, & h2, & h3': {\r\n                  textAlign: 'center',\r\n                  color: '#1976d2',\r\n                  marginBottom: '20px'\r\n                },\r\n                '& p': {\r\n                  marginBottom: '15px',\r\n                  textAlign: 'justify'\r\n                },\r\n                '& strong': {\r\n                  color: '#1976d2',\r\n                  fontWeight: 'bold'\r\n                }\r\n              }}\r\n            />\r\n          ) : (\r\n            <Box sx={{ \r\n              display: 'flex', \r\n              justifyContent: 'center', \r\n              alignItems: 'center', \r\n              height: '400px',\r\n              flexDirection: 'column',\r\n              color: 'text.secondary'\r\n            }}>\r\n              <Typography variant=\"h6\" mb={2}>\r\n                لا يوجد محتوى للعرض\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                يرجى التأكد من وجود قالب العقد وبيانات المستثمر\r\n              </Typography>\r\n            </Box>\r\n          )}\r\n        </Paper>\r\n      </DialogContent>\r\n\r\n      <Divider className=\"no-print\" />\r\n      \r\n      <DialogActions \r\n        className=\"no-print\"\r\n        sx={{ \r\n          p: 3, \r\n          gap: 2,\r\n          flexDirection: 'row-reverse',\r\n          bgcolor: '#fafafa',\r\n          '@media print': {\r\n            display: 'none !important'\r\n          }\r\n        }}\r\n      >\r\n        <Button \r\n          onClick={onClose}\r\n          disabled={loading}\r\n          variant=\"outlined\"\r\n          sx={{ \r\n            minWidth: '100px',\r\n            borderColor: 'grey.300',\r\n            color: 'text.secondary',\r\n            '&:hover': {\r\n              borderColor: 'grey.400',\r\n              bgcolor: 'grey.50'\r\n            }\r\n          }}\r\n        >\r\n          إغلاق\r\n        </Button>\r\n        \r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<Print sx={{marginLeft: '10px'}} />}\r\n          onClick={() => window.print()}\r\n          disabled={loading || !contractHtml}\r\n          sx={{ \r\n            minWidth: '120px',\r\n            borderColor: '#1976d2',\r\n            color: '#1976d2',\r\n            '&:hover': {\r\n              borderColor: '#1565c0',\r\n              bgcolor: '#e3f2fd'\r\n            }\r\n          }}\r\n        >\r\n          طباعة\r\n        </Button>\r\n        \r\n        <Button\r\n          variant=\"contained\"\r\n          startIcon={<Download sx={{marginLeft: '10px'}} />}\r\n          onClick={onGeneratePDF}\r\n          disabled={loading || !contractHtml}\r\n          sx={{\r\n            bgcolor: \"#0d40a5\",\r\n            \"&:hover\": { bgcolor: \"#0b3589\" },\r\n            minWidth: '140px'\r\n          }}\r\n        >\r\n          {loading ? 'جاري الحفظ...' : 'حفظ كـ PDF'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ContractPreview;\r\n","import React, { useState, useCallback } from 'react';\nimport html2pdf from 'html2pdf.js';\nimport ContractPreview from './ContractPreview';\nimport Api, { handleApiError } from '../config/Api';\nimport { notifySuccess, notifyError } from '../utilities/toastify';\n\nconst numberToArabicWords = (num) => {\n  const ones = ['', 'واحد', 'اثنان', 'ثلاثة', 'أربعة', 'خمسة', 'ستة', 'سبعة', 'ثمانية', 'تسعة'];\n  const tens = ['', '', 'عشرون', 'ثلاثون', 'أربعون', 'خمسون', 'ستون', 'سبعون', 'ثمانون', 'تسعون'];\n  const teens = ['عشرة', 'أحد عشر', 'اثنا عشر', 'ثلاثة عشر', 'أربعة عشر', 'خمسة عشر', 'ستة عشر', 'سبعة عشر', 'ثمانية عشر', 'تسعة عشر'];\n  const hundreds = ['', 'مائة', 'مائتان', 'ثلاثمائة', 'أربعمائة', 'خمسمائة', 'ستمائة', 'سبعمائة', 'ثمانمائة', 'تسعمائة'];\n\n  if (num === 0) return 'صفر';\n  if (num < 0) return 'سالب ' + numberToArabicWords(-num);\n\n  let result = '';\n  \n  // الآلاف\n  if (num >= 1000) {\n    const thousandsPart = Math.floor(num / 1000);\n\n    if (thousandsPart === 1) {\n      result += 'ألف';\n    } else if (thousandsPart === 2) {\n      result += 'ألفان';\n    } else if (thousandsPart < 11) {\n      result += ones[thousandsPart] + ' آلاف';\n    } else {\n      result += numberToArabicWords(thousandsPart) + ' ألف';\n    }\n\n    num %= 1000;\n\n    // ✅ إضافة حرف (و) لو فيه بقية بعد الألف\n    if (num > 0) {\n      result += ' و ';\n    } else {\n      result += ' ';\n    }\n  }\n\n  // المئات\n  if (num >= 100) {\n    const hundredsPart = Math.floor(num / 100);\n    result += hundreds[hundredsPart];\n    num %= 100;\n    if (num > 0) result += ' و ';\n  }\n\n  // العشرات والآحاد\n  if (num >= 20) {\n    const tensPart = Math.floor(num / 10);\n    const onesPart = num % 10;\n    result += tens[tensPart];\n    if (onesPart > 0) {\n      result += ' و' + ones[onesPart];\n    }\n  } else if (num >= 10) {\n    result += teens[num - 10];\n  } else if (num > 0) {\n    result += ones[num];\n  }\n\n  return result.trim();\n};\n\n\nconst getCurrentDates = () => {\n  const now = new Date();\n  const gregorianDate = now.toLocaleDateString('ar-SA');\n  \n  const hijriYear = Math.floor((now.getFullYear() - 622) * 1.030684) + 1;\n  const hijriDate = `${now.getDate()}/${now.getMonth() + 1}/${hijriYear}`;\n  \n  return { gregorianDate, hijriDate };\n};\n\nconst ContractGenerator = React.forwardRef(({ \n  investorData,   \n  templateContent, \n  onContractGenerated,\n  contractType = 'MUDARABAH'\n}, ref) => {\n  const [showPreview, setShowPreview] = useState(false);\n  const [contractHtml, setContractHtml] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Generate filled contract from template\n  const generateContract = useCallback(async () => {\n    if (!investorData || !templateContent) {\n      notifyError('بيانات المستثمر أو قالب العقد غير متوفر');\n      return;\n    }\n\n    try {\n      console.log('Investor Data:', investorData);\n      console.log('Template Content:', templateContent);\n      \n      const { gregorianDate, hijriDate } = getCurrentDates();\n      const capitalInWords = numberToArabicWords(investorData.capitalAmount);\n      \n      console.log('Capital in words:', capitalInWords);\n      console.log('Dates:', { gregorianDate, hijriDate });\n      \n      // Replace placeholders in template\n      let filledTemplate = templateContent\n        // Basic investor data\n        .replace(/{{اسم_العميل}}/g, investorData.name || '')\n        .replace(/{{رقم_هوية_العميل}}/g, investorData.nationalId || '')\n        .replace(/{{عنوان_العميل}}/g, investorData.address || '')\n        .replace(/{{هاتف_العميل}}/g, investorData.phone || '')\n        .replace(/{{بريد_العميل}}/g, investorData.email || '')\n        \n        // Financial data\n        .replace(/{{رأس_المال}}/g, investorData.capitalAmount?.toLocaleString('ar-SA') || '0')\n        .replace(/{{رأس_المال_كتابة}}/g, capitalInWords)\n        .replace(/{{المبلغ_رقما}}/g, investorData.capitalAmount?.toLocaleString('ar-SA') || '0')\n        .replace(/{{المبلغ_كتابة}}/g, capitalInWords)\n        .replace(/{{نسبة_أرباح_المنشأة}}/g, String(investorData.orgProfitPercent || '0'))\n        .replace(/{{نسبة_أرباح_المستثمر}}/g, String(investorData.partnerProfitPercent || '0'))\n        \n        // Dates\n        .replace(/{{التاريخ_الهجري}}/g, hijriDate)\n        .replace(/{{التاريخ_الميلادي}}/g, gregorianDate)\n        .replace(/{{تاريخ_العقد_هجري}}/g, hijriDate)\n        .replace(/{{تاريخ_العقد_ميلادي}}/g, gregorianDate)\n        \n        // Mudarabah specific fields\n        .replace(/{{اسم_رب_المال}}/g, investorData.name || '')\n        .replace(/{{هوية_رب_المال}}/g, investorData.nationalId || '')\n        .replace(/{{عنوان_رب_المال}}/g, investorData.address || '')\n        .replace(/{{اسم_المضارب_1}}/g, 'ربيش سالم ناصر الهمامي')\n        .replace(/{{هوية_المضارب_1}}/g, '1116369545')\n        .replace(/{{عنوان_المضارب_1}}/g, 'المملكة العربية السعودية - شرورة')\n        .replace(/{{اسم_المضارب_2}}/g, 'مبارك سالم ناصر الهمامي')\n        .replace(/{{هوية_المضارب_2}}/g, '1116369511')\n        .replace(/{{عنوان_المضارب_2}}/g, 'المملكة العربية السعودية - شرورة')\n        .replace(/{{مدينة_العقد}}/g, 'الرياض')\n        \n        // Default values for other contract types\n        .replace(/{{اسم_الدائن}}/g, investorData.name || '')\n        .replace(/{{اسم_المدين}}/g, investorData.name || '')\n        .replace(/{{رقم_السند}}/g, `${Date.now()}`)\n        .replace(/{{تاريخ_الانشاء}}/g, gregorianDate)\n        .replace(/{{تاريخ_الاستحقاق}}/g, gregorianDate)\n        .replace(/{{مدينة_الاصدار}}/g, 'الرياض')\n        .replace(/{{مدينة_الوفاء}}/g, 'الرياض')\n        .replace(/{{سبب_انشاء_السند}}/g, 'استثمار في المضاربة')\n        .replace(/{{قيمة_السند_رقما}}/g, investorData.capitalAmount?.toLocaleString() || '0')\n        .replace(/{{قيمة_السند_كتابة}}/g, capitalInWords);\n\n      console.log('Filled Template:', filledTemplate);\n      \n      setContractHtml(filledTemplate);\n      setShowPreview(true);\n    } catch (error) {\n      console.error('Error generating contract:', error);\n      notifyError('حدث خطأ أثناء توليد العقد');\n    }\n  }, [investorData, templateContent]);\n\n  // Generate PDF from HTML\n  const generatePDF = useCallback(async () => {\n    if (!contractHtml) {\n      notifyError('لا يوجد محتوى عقد لتحويله إلى PDF');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const element = document.getElementById('contract-preview');\n      if (!element) {\n        throw new Error('عنصر معاينة العقد غير موجود');\n      }\n\n      // PDF generation options\n      const options = {\n        margin: [5, 5, 5, 5],\n        filename: `mudarabah_contract_${Date.now()}.pdf`,\n        image: { type: 'jpeg', quality: 1.0 },\n        html2canvas: { \n          scale: 3,\n          useCORS: true,\n          letterRendering: true,\n          allowTaint: true,\n          logging: false,\n          backgroundColor: '#ffffff'\n        },\n        jsPDF: { \n          unit: 'mm', \n          format: 'a4', \n          orientation: 'portrait',\n          compress: false,\n          hotfixes: ['px_scaling']\n        }\n      };\n\n      // Generate PDF blob\n      const pdfBlob = await html2pdf()\n        .from(element)\n        .set(options)\n        .outputPdf('blob');\n\n      // Upload PDF to server\n      await uploadPDFToServer(pdfBlob);\n      \n      notifySuccess('تم إنشاء وحفظ العقد بنجاح');\n      setShowPreview(false);\n      \n      if (onContractGenerated) {\n        onContractGenerated(pdfBlob);\n      }\n    } catch (error) {\n      console.error('Error generating PDF:', error);\n      notifyError('حدث خطأ أثناء إنشاء ملف PDF');\n      handleApiError(error);\n    } finally {\n      setLoading(false);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [contractHtml, investorData, onContractGenerated]);\n\n  // Upload PDF to server\n  const uploadPDFToServer = async (pdfBlob) => {\n    try {\n      const formData = new FormData();\n      formData.append('file', pdfBlob, `mudarabah_contract_${Date.now()}.pdf`);\n      formData.append('investorId', investorData.id);\n      formData.append('contractType', contractType);\n\n      const response = await Api.post(`/api/partners/upload/${investorData.id}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      return response.data;\n    } catch (error) {\n      console.error('Error uploading PDF:', error);\n      throw error;\n    }\n  };\n\n  // Expose generateContract method through ref\n  React.useImperativeHandle(ref, () => ({\n    generateContract\n  }));\n\n  return (\n    <>\n      <ContractPreview\n        open={showPreview}\n        onClose={() => setShowPreview(false)}\n        contractHtml={contractHtml}\n        onGeneratePDF={generatePDF}\n        loading={loading}\n        contractTitle={`معاينة عقد المضاربة - ${investorData?.name || ''}`}\n      />\n    </>\n  );\n});\n\nexport default ContractGenerator;\n","import React, { useState, useRef } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  Grid,\n  Box,\n  Typography,\n  CircularProgress,\n  Divider,\n  Checkbox,\n  FormControlLabel,\n} from \"@mui/material\";\nimport Api, { handleApiError } from \"../../config/Api\";\nimport { notifyError, notifySuccess } from \"../../utilities/toastify\";\nimport ContractGenerator from \"../ContractGenerator\";\n\nconst AddInvestor = ({ open, onClose, onSuccess }) => {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    nationalId: \"\",\n    address: \"\",\n    phone: \"\",\n    email: \"\",\n    orgProfitPercent: \"\",\n    capitalAmount: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [generateContract, setGenerateContract] = useState(true);\n  const [savedInvestorData, setSavedInvestorData] = useState(null);\n  const [mudarabahTemplate, setMudarabahTemplate] = useState('');\n  const contractGeneratorRef = useRef(null);\n\n  const handleChange = (field) => (event) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: event.target.value\n    }));\n    if (errors[field]) {\n      setErrors(prev => ({\n        ...prev,\n        [field]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.name.trim()) newErrors.name = 'الاسم مطلوب';\n    if (!formData.nationalId.trim()) newErrors.nationalId = 'رقم الهوية مطلوب';\n    if (!formData.address.trim()) newErrors.address = 'العنوان مطلوب';\n    if (!formData.phone.trim()) newErrors.phone = 'رقم الجوال مطلوب';\n    if (!formData.orgProfitPercent) newErrors.orgProfitPercent = 'نسبة أرباح المنشأة مطلوبة';\n    if (!formData.capitalAmount) newErrors.capitalAmount = 'رأس المال مطلوب';\n    \n    if (formData.nationalId && !/^\\d{14}$/.test(formData.nationalId)) {\n      newErrors.nationalId = 'رقم الهوية يجب أن يكون 14 رقمًا';\n    }\n    if (formData.phone && !/^[0-9]{10}$/.test(formData.phone)) {\n      newErrors.phone = 'رقم الجوال يجب أن يحتوي على 10 أرقام';\n    }\n    \n    if (formData.orgProfitPercent && (formData.orgProfitPercent < 0 || formData.orgProfitPercent > 100)) {\n      newErrors.orgProfitPercent = 'النسبة يجب أن تكون بين 0 و 100';\n    }\n    \n    if (formData.capitalAmount && formData.capitalAmount <= 0) {\n      newErrors.capitalAmount = 'رأس المال يجب أن يكون أكبر من صفر';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Fetch Mudarabah template when modal opens\n  React.useEffect(() => {\n    if (open && generateContract) {\n      fetchMudarabahTemplate();\n    }\n  }, [open, generateContract]);\n\n  const fetchMudarabahTemplate = async () => {\n    try {\n      const response = await Api.get('/api/templates/mudarabah');\n      setMudarabahTemplate(response.data.content || '');\n    } catch (error) {\n      console.warn('Could not fetch Mudarabah template:', error);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n\n    setLoading(true);\n    try {\n      const response = await Api.post(\"/api/partners\", {\n        ...formData,\n        orgProfitPercent: parseInt(formData.orgProfitPercent),\n        capitalAmount: parseInt(formData.capitalAmount),\n      });\n      \n      const newInvestorData = {\n        ...response.data.partner,\n        partnerProfitPercent: response.data.partnerProfitPercent || (100 - parseInt(formData.orgProfitPercent))\n      };\n      \n      notifySuccess('تم إضافة المستثمر بنجاح');\n      \n      // If contract generation is enabled, show contract preview\n      if (generateContract && mudarabahTemplate) {\n        console.log('Setting investor data for contract generation:', newInvestorData);\n        console.log('Template content length:', mudarabahTemplate.length);\n        \n        setSavedInvestorData(newInvestorData);\n        // Trigger contract generation after a short delay to ensure component is mounted\n        setTimeout(() => {\n          if (contractGeneratorRef.current) {\n            console.log('Triggering contract generation...');\n            contractGeneratorRef.current.generateContract();\n          } else {\n            console.error('Contract generator ref not available');\n          }\n        }, 500);\n      } else {\n        // Close modal and refresh data\n        onSuccess();\n        handleClose();\n      }\n    } catch (error) {\n      notifyError(error.response?.data?.message || 'حدث خطأ أثناء إضافة المستثمر');\n      handleApiError(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleContractGenerated = () => {\n    // Contract has been generated and saved\n    onSuccess();\n    handleClose();\n  };\n\n  const handleClose = () => {\n    setFormData({\n      name: \"\",\n      nationalId: \"\",\n      address: \"\",\n      phone: \"\",\n      email: \"\",\n      orgProfitPercent: \"\",\n      capitalAmount: \"\",\n    });\n    setErrors({});\n    setSavedInvestorData(null);\n    setMudarabahTemplate('');\n    onClose();\n  };\n\n  return (\n    <Dialog \n      open={open} \n      onClose={handleClose}\n      maxWidth=\"sm\"\n      fullWidth\n      dir=\"rtl\"\n    >\n      <DialogTitle sx={{ pb: 1 }}>\n        <Typography variant=\"h6\" fontWeight=\"bold\">\n          إضافة مستثمر جديد\n        </Typography>\n      </DialogTitle>\n\n      <Divider />\n      \n      <DialogContent sx={{ py: 3 }}>\n        <Box>\n          <Typography variant=\"subtitle1\" fontWeight=\"bold\" mb={3}>\n            المعلومات الشخصية\n          </Typography>\n\n          <Grid container spacing={2.5}>\n            <Grid item xs={12}>\n              <TextField\n                label=\"الاسم الكامل\"\n                value={formData.name}\n                onChange={handleChange('name')}\n                fullWidth\n                error={!!errors.name}\n                helperText={errors.name}\n                required\n                size=\"medium\"\n                sx={{width: '250px'}}\n              />\n            </Grid>\n            \n            <Grid item xs={12}>\n              <TextField\n                label=\"رقم الهوية الوطنية\"\n                value={formData.nationalId}\n                onChange={handleChange('nationalId')}\n                fullWidth\n                error={!!errors.nationalId}\n                helperText={errors.nationalId}\n                required\n                inputProps={{ maxLength: 14 }}\n                size=\"medium\"\n                sx={{width: '250px'}}\n              />\n            </Grid>\n            \n            <Grid item xs={12}>\n              <TextField\n                label=\"رقم الجوال\"\n                value={formData.phone}\n                onChange={handleChange('phone')}\n                fullWidth\n                error={!!errors.phone}\n                helperText={errors.phone}\n                required\n                placeholder=\"05XXXXXXXX\"\n                inputProps={{ maxLength: 10 }}\n                size=\"medium\"\n                sx={{width: '250px'}}\n              />\n            </Grid>\n            \n            <Grid item xs={12}>\n              <TextField\n                label=\"البريد الإلكتروني (اختياري)\"\n                type=\"email\"\n                value={formData.email}\n                onChange={handleChange('email')}\n                fullWidth\n                size=\"medium\"\n                sx={{width: '250px'}}\n              />\n            </Grid>\n            \n            <Grid item xs={12}>\n              <TextField\n                label=\"العنوان\"\n                value={formData.address}\n                onChange={handleChange('address')}\n                fullWidth\n                error={!!errors.address}\n                helperText={errors.address}\n                required\n                multiline\n                rows={1}\n                size=\"medium\"\n                sx={{width: '520px'}}\n              />\n            </Grid>\n          </Grid>\n\n          <Typography variant=\"subtitle1\" fontWeight=\"bold\" mt={4} mb={3}>\n            المعلومات المالية\n          </Typography>\n\n          <Grid container spacing={2.5}>\n            <Grid item xs={12}>\n              <TextField\n                label=\"رأس المال (ريال)\"\n                type=\"number\"\n                value={formData.capitalAmount}\n                onChange={handleChange('capitalAmount')}\n                fullWidth\n                error={!!errors.capitalAmount}\n                helperText={errors.capitalAmount}\n                required\n                InputProps={{ inputProps: { min: 0 } }}\n                size=\"medium\"\n                sx={{width: '250px'}}\n              />\n            </Grid>\n            \n            <Grid item xs={12}>\n              <TextField\n                label=\"نسبة أرباح المنشأة (%)\"\n                type=\"number\"\n                value={formData.orgProfitPercent}\n                onChange={handleChange('orgProfitPercent')}\n                fullWidth\n                error={!!errors.orgProfitPercent}\n                helperText={errors.orgProfitPercent}\n                required\n                InputProps={{ inputProps: { min: 0, max: 100 } }}\n                size=\"medium\"\n                sx={{width: '250px'}}\n              />\n            </Grid>\n          </Grid>\n\n          <Typography variant=\"subtitle1\" fontWeight=\"bold\" mt={4} mb={2}>\n            خيارات إضافية\n          </Typography>\n          \n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={generateContract}\n                onChange={(e) => setGenerateContract(e.target.checked)}\n                color=\"primary\"\n              />\n            }\n            label=\"توليد عقد المضاربة تلقائياً بعد الحفظ\"\n            sx={{ mb: 2 }}\n          />\n        </Box>\n      </DialogContent>\n\n      <Divider />\n      \n      <DialogActions sx={{ p: 2.5, gap: 1,flexDirection: 'row-reverse' }}>\n        <Button \n          onClick={handleClose}\n          disabled={loading}\n          variant=\"outlined\"\n          sx={{ \n            minWidth: '100px',\n            borderColor: 'grey.300',\n            color: 'text.secondary',\n            '&:hover': {\n              borderColor: 'grey.400',\n              bgcolor: 'grey.50'\n            }\n          }}\n        >\n          إلغاء\n        </Button>\n        <Button\n          variant=\"contained\"\n          onClick={handleSubmit}\n          disabled={loading}\n          sx={{\n            bgcolor: \"#0d40a5\",\n            \"&:hover\": { bgcolor: \"#0b3589\" },\n            minWidth: '100px'\n          }}\n        >\n          {loading ? <CircularProgress size={24} color=\"inherit\" /> : 'إضافة'}\n        </Button>\n      </DialogActions>\n\n      {/* Contract Generator Component */}\n      {savedInvestorData && mudarabahTemplate && (\n        <ContractGenerator\n          ref={contractGeneratorRef}\n          investorData={savedInvestorData}\n          templateContent={mudarabahTemplate}\n          onContractGenerated={handleContractGenerated}\n          contractType=\"MUDARABAH\"\n        />\n      )}\n    </Dialog>\n  );\n};\n\nexport default AddInvestor;","import React, { useState, useEffect } from \"react\";\nimport {\n  Box,\n  Grid,\n  Typography,\n  Button,\n  TextField,\n  Paper,\n  Tabs,\n  Tab,\n  IconButton,\n  Chip,\n  InputAdornment,\n  CircularProgress,\n  Pagination,\n  Card,\n  CardContent,\n  Divider,\n  Table,\n  TableBody,\n  TableContainer,\n  TableHead,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  MenuItem,\n  Stack,\n  FormControl,\n  Select,\n  InputLabel,\n  TablePagination,\n} from \"@mui/material\";\nimport {\n  Add,\n  Edit,\n  Save,\n  Search,\n  Download,\n  CheckCircle,\n  Print,\n  Delete,\n  Share,\n} from \"@mui/icons-material\";\nimport Api, { handleApiError } from \"../../config/Api\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { debounce } from 'lodash';\nimport AddInvestor from \"../../components/modals/AddInvestor\";\nimport DeleteModal from \"../../components/modals/DeleteModal\";\nimport { notifyError, notifySuccess } from \"../../utilities/toastify\";\nimport { saveAs } from 'file-saver';\nimport dayjs from \"dayjs\";\nimport {StyledTableCell, StyledTableRow} from '../../components/layouts/tableLayout';\nconst getInvestors = async (page = 1, searchQuery = '', status = '') => {\n  let queryParams = new URLSearchParams();\n  \n  if (searchQuery.trim()) {\n    if (/^\\d+$/.test(searchQuery.trim())) {\n      queryParams.append('nationalId', searchQuery.trim());\n    } else {\n      queryParams.append('name', searchQuery.trim());\n    }\n  }\n  \n  if (status.trim()) {\n    queryParams.append('isActive', status.trim() === 'نشط' ? 'true' : 'false');\n  }\n\n  queryParams.append('limit', '10');\n  \n  const queryString = queryParams.toString();\n  const url = `/api/partners/all/${page}${queryString ? `?${queryString}` : ''}`;\n  \n  const response = await Api.get(url);\n  return response.data;\n};\n\nconst getInvestorDetails = async (investorId) => {\n  const response = await Api.get(`/api/partners/${investorId}`);\n  return response.data;\n};\n\n// New API functions for transactions\nconst getPartnerTransactions = async (partnerId, page = 1) => {\n  const response = await Api.get(`/api/partners/transaction/${partnerId}/${page}`);\n  return response.data;\n};\n\nconst createPartnerTransaction = async (partnerId, transactionData) => {\n  const response = await Api.post(`/api/partners/transaction/${partnerId}`, transactionData);\n  return response.data;\n};\n\nconst deletePartnerTransaction = async (transactionId) => {\n  const response = await Api.delete(`/api/partners/transaction/${transactionId}`);\n  return response.data;\n};\n\nexport default function Investors() {\n  const [tab, setTab] = useState(0);\n  const [search, setSearch] = useState(\"\");\n  const [selectedStatus, setSelectedStatus] = useState(\"\");\n  const [selectedInvestor, setSelectedInvestor] = useState(null);\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [investorToDelete, setInvestorToDelete] = useState(null);\n  const [editMode, setEditMode] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [editFormData, setEditFormData] = useState({});\n  \n  // New states for transactions\n  const [isTransactionModalOpen, setIsTransactionModalOpen] = useState(false);\n  const [transactionForm, setTransactionForm] = useState({\n    type: \"DEPOSIT\",\n    amount: \"\"\n  });\n  const [transactionsPage, setTransactionsPage] = useState(1);\n  const [transactionToDelete, setTransactionToDelete] = useState(null);\n  const [isDeleteTransactionModalOpen, setIsDeleteTransactionModalOpen] = useState(false);\n  \n  const queryClient = useQueryClient();\n\n  const { data: investorsData, isLoading: isInvestorsLoading, refetch } = useQuery({\n    queryKey: [\"investors\", currentPage, search, selectedStatus],\n    queryFn: () => getInvestors(currentPage, search, selectedStatus),\n    retry: 1,\n  });\n\n  const { data: investorDetails } = useQuery({\n    queryKey: [\"investor-details\", selectedInvestor?.id],\n    queryFn: () => selectedInvestor ? getInvestorDetails(selectedInvestor.id) : null,\n    enabled: !!selectedInvestor,\n    retry: 1,\n  });\n\n  // New query for transactions\n  const { data: transactionsData, isLoading: isTransactionsLoading } = useQuery({\n    queryKey: [\"partner-transactions\", selectedInvestor?.id, transactionsPage],\n    queryFn: () => selectedInvestor ? getPartnerTransactions(selectedInvestor.id, transactionsPage) : null,\n    enabled: !!selectedInvestor,\n    retry: 1,\n  });\n\n  const debouncedSearch = debounce((value) => {\n    setSearch(value);\n    setCurrentPage(1);\n  }, 500);\n\n  const handleSearchChange = (event) => {\n    debouncedSearch(event.target.value);\n  };\n\n  const handlePageChange = (event, newPage) => {\n    setCurrentPage(newPage);\n  };\n\n  const handleTransactionsPageChange = (event, newPage) => {\n    setTransactionsPage(newPage);\n  };\n\n  const handleTabChange = (event, newValue) => {\n    setTab(newValue);\n  };\n\n  const handleInvestorSelect = (investor) => {\n    setSelectedInvestor(investor);\n    setEditMode(false);\n    setTransactionsPage(1); // Reset transactions page when selecting new investor\n  };\n\n  const handleInputChange = (field, value) => {\n    setEditFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const handleTransactionInputChange = (field, value) => {\n    setTransactionForm(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const handleSaveChanges = async () => {\n    try {\n      const dataToSend = {\n        ...editFormData,\n        capitalAmount: editFormData.capitalAmount ? parseInt(editFormData.capitalAmount) : undefined,\n        orgProfitPercent: editFormData.orgProfitPercent ? parseInt(editFormData.orgProfitPercent) : undefined\n      };\n      \n      await Api.patch(`/api/partners/${selectedInvestor.id}`, dataToSend);\n      queryClient.invalidateQueries({ queryKey: ['investor-details', selectedInvestor.id] });\n      queryClient.invalidateQueries({ queryKey: ['investors'] });\n      notifySuccess('تم تحديث بيانات المستثمر بنجاح');\n      \n      setEditMode(false);\n    } catch (error) {\n      notifyError(error.response?.data?.message || 'حدث خطأ أثناء تحديث البيانات');\n      handleApiError(error);\n    }\n  };\n\n  const handleAddInvestor = () => {\n    setIsAddModalOpen(true);\n  };\n\n  const handleDeleteInvestor = async (investorId) => {\n    try {\n      await Api.delete(`/api/partners/${investorId}`);\n      \n      if (selectedInvestor?.id === investorId) {\n        setSelectedInvestor(null);\n      }\n      \n      setIsDeleteModalOpen(false);\n      setInvestorToDelete(null);\n      \n      await refetch();\n      \n      notifySuccess('تم حذف المستثمر بنجاح');\n    } catch (error) { \n      notifyError(error.response?.data?.message || 'حدث خطأ أثناء حذف المستثمر');\n      handleApiError(error);\n    }\n  };\n\n  const openDeleteModal = (investor) => {\n    setInvestorToDelete(investor);\n    setIsDeleteModalOpen(true);\n  };\n\n  // New transaction handlers\n  const handleAddTransaction = () => {\n    setTransactionForm({\n      type: \"DEPOSIT\",\n      amount: \"\"\n    });\n    setIsTransactionModalOpen(true);\n  };\n\n  const handleSaveTransaction = async () => {\n    try {\n      if (!transactionForm.amount || parseFloat(transactionForm.amount) <= 0) {\n        notifyError(\"يرجى إدخال مبلغ صحيح\");\n        return;\n      }\n\n      await createPartnerTransaction(selectedInvestor.id, {\n        type: transactionForm.type,\n        amount: parseFloat(transactionForm.amount)\n      });\n\n      // Invalidate queries to refresh data\n      queryClient.invalidateQueries({ queryKey: ['partner-transactions', selectedInvestor.id] });\n      queryClient.invalidateQueries({ queryKey: ['investor-details', selectedInvestor.id] });\n      \n      notifySuccess(\"تم إضافة العملية المالية بنجاح\");\n      setIsTransactionModalOpen(false);\n      setTransactionForm({\n        type: \"DEPOSIT\",\n        amount: \"\"\n      });\n    } catch (error) {\n      notifyError(error.response?.data?.message || 'حدث خطأ أثناء إضافة العملية المالية');\n      handleApiError(error);\n    }\n  };\n\n  const handleDeleteTransaction = async (transactionId) => {\n    try {\n      await deletePartnerTransaction(transactionId);\n      \n      queryClient.invalidateQueries({ queryKey: ['partner-transactions', selectedInvestor.id] });\n      queryClient.invalidateQueries({ queryKey: ['investor-details', selectedInvestor.id] });\n      \n      notifySuccess(\"تم حذف العملية المالية بنجاح\");\n      setIsDeleteTransactionModalOpen(false);\n      setTransactionToDelete(null);\n    } catch (error) {\n      notifyError(error.response?.data?.message || 'حدث خطأ أثناء حذف العملية المالية');\n      handleApiError(error);\n    }\n  };\n\n  const openDeleteTransactionModal = (transaction) => {\n    setTransactionToDelete(transaction);\n    setIsDeleteTransactionModalOpen(true);\n  };\n\n  const handleDownloadFile = async (fileUrl) => {\n    try {\n      const response = await fetch(fileUrl);\n      const blob = await response.blob();\n      \n      const originalName = investorDetails.mudarabahFileUrl.split('/').pop();\n      const extension = originalName.split('.').pop();\n      const newFileName = `mudarabah_${investorDetails.name}.${extension}`;\n      \n      saveAs(blob, newFileName);\n    } catch (error) {\n      notifyError(error.response?.data?.message || 'حدث خطأ أثناء تحميل الملف');\n      handleApiError(error);\n    }\n  };\n\n  const handlePrintFile = async (fileUrl) => {\n    try {\n      const response = await fetch(fileUrl);\n      const blob = await response.blob();\n      const blobUrl = URL.createObjectURL(blob);\n      const printWindow = window.open(blobUrl, '_blank');\n      \n      printWindow?.addEventListener('load', () => {\n        printWindow.print();\n        printWindow.addEventListener('afterprint', () => {\n          URL.revokeObjectURL(blobUrl);\n        });\n      }, { once: true });\n      \n    } catch (error) {\n      notifyError(error.response?.data?.message || 'حدث خطأ أثناء محاولة الطباعة');\n      handleApiError(error);\n    }\n  };\n\n  const handleShareFile = async (fileUrl) => {\n    try {\n      // Fetch file from server\n      const response = await fetch(fileUrl);\n      const blob = await response.blob();\n  \n      // Build filename with investor name\n      const originalName = fileUrl.split('/').pop();\n      const ext = originalName.split('.').pop();\n      const fileName = `mudarabah_${investorDetails.name}.${ext}`;\n  \n      const file = new File([blob], fileName, { type: blob.type });\n  \n      // ✅ If browser supports file sharing\n      if (navigator.canShare && navigator.canShare({ files: [file] })) {\n        await navigator.share({\n          title: fileName,\n          text: `مشاركة عقد المضاربة للعميل: ${investorDetails.name}`,\n          files: [file],\n        });\n        return;\n      }\n  \n      // ❌ If file sharing is not supported (desktop fallback)\n      await navigator.clipboard.writeText(fileUrl);\n      notifySuccess(\"جهازك لا يدعم مشاركة الملفات — تم نسخ رابط الملف ✅\");\n  \n    } catch (error) {\n      console.error(\"Share error:\", error);\n      notifyError(\"تعذرت مشاركة الملف\");\n    }\n  };\n  \n  useEffect(() => {\n    if (investorsData?.partners?.length > 0 && !selectedInvestor) {\n      setSelectedInvestor(investorsData.partners[0]);\n    }\n    else if (selectedInvestor && investorsData?.partners?.length > 0) {\n      const stillExists = investorsData.partners.some(investor => investor.id === selectedInvestor.id);\n      if (!stillExists) {\n        setSelectedInvestor(investorsData.partners[0]);\n      }\n    }\n    else if (selectedInvestor && (!investorsData?.partners || investorsData.partners.length === 0)) {\n      setSelectedInvestor(null);\n    }\n  }, [investorsData, selectedInvestor]);\n\n  useEffect(() => {\n    if (investorDetails) {\n      setEditFormData({\n        name: investorDetails.name || '',\n        phone: investorDetails.phone || '',\n        address: investorDetails.address || '',\n        email: investorDetails.email || '',\n        orgProfitPercent: investorDetails.orgProfitPercent || '',\n        capitalAmount: investorDetails.capitalAmount || '',\n      });\n    }\n  }, [investorDetails]);\n\n  const getStatusColor = (isActive) => {\n    return isActive ? 'success' : 'error';\n  };\n\n  const getStatusText = (isActive) => {\n    return isActive ? 'نشط' : 'غير نشط';\n  };\n\n  const getTransactionTypeText = (type) => {\n    switch (type) {\n      case \"DEPOSIT\":\n        return \"إيداع\";\n      case \"WITHDRAWAL\":\n        return \"سحب\";\n      default:\n        return type;\n    }\n  };\n\n  const getTransactionTypeColor = (type) => {\n    switch (type) {\n      case \"DEPOSIT\":\n        return \"success\";\n      case \"WITHDRAWAL\":\n        return \"error\";\n      default:\n        return \"default\";\n    }\n  };\n\n  return (\n    <Box sx={{ bgcolor: \"#f6f6f8\", minHeight: \"100vh\" }}>\n      {/* Header */}\n      <Box\n        sx={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          p: 2,\n          bgcolor: \"#fff\", \n          borderBottom: \"1px solid #ddd\",\n        }}\n      >\n        <Box>\n          <Typography variant=\"h5\" fontWeight=\"bold\">\n            إدارة المستثمرين\n          </Typography>\n        </Box>\n        <Box sx={{ display: \"flex\", gap: 1 }}>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add sx={{marginLeft: '10px'}} />}\n            onClick={handleAddInvestor}\n            sx={{\n              bgcolor: \"#0d40a5\",\n              \"&:hover\": { bgcolor: \"#0b3589\" },\n              fontWeight: \"bold\",\n              borderRadius: 2,\n              px: 2.5,\n              py: 1,\n            }}\n          >\n            إضافة مستثمر جديد\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Main layout */}\n      <Box sx={{ display: 'flex', height: 'calc(100vh - 120px)' }}>\n        {/* Left section – investors list */}\n        <Box\n          sx={{\n            width: '350px',\n            borderRight: \"1px solid #ddd\",\n            bgcolor: \"#fafafa\",\n            height: \"100%\",\n            overflowY: \"auto\",\n            flexShrink: 0\n          }}\n        >\n          <Box sx={{ p: 3, borderBottom: \"1px solid #ddd\", bgcolor: \"#fafafa\" }}>\n            <TextField\n              placeholder=\"البحث بالاسم أو رقم الهوية\"\n              fullWidth\n              size=\"small\"\n              onChange={handleSearchChange}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <Search />\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <Box sx={{ display: \"flex\", gap: 1, flexWrap: \"wrap\", mt: 2 }}>\n              <Chip \n                label=\"الكل\" \n                color={selectedStatus === \"\" ? \"primary\" : \"default\"} \n                variant=\"outlined\" \n                onClick={() => {\n                  setSelectedStatus(\"\");\n                  setCurrentPage(1);\n                }}\n              />\n              <Chip \n                label=\"نشط\" \n                color={selectedStatus === \"نشط\" ? \"primary\" : \"default\"} \n                variant=\"outlined\" \n                onClick={() => {\n                  setSelectedStatus(prev => prev === \"نشط\" ? \"\" : \"نشط\");\n                  setCurrentPage(1);\n                }}\n              />\n              <Chip \n                label=\"غير نشط\" \n                color={selectedStatus === \"غير نشط\" ? \"primary\" : \"default\"} \n                variant=\"outlined\" \n                onClick={() => {\n                  setSelectedStatus(prev => prev === \"غير نشط\" ? \"\" : \"غير نشط\");\n                  setCurrentPage(1);\n                }}\n              />\n            </Box>\n          </Box>\n\n          {/* Results info */}\n          {investorsData && !isInvestorsLoading && (\n            <Box sx={{ p: 2, borderBottom: '1px solid #eee', bgcolor: '#f9f9f9' }}>\n              <Typography variant=\"body2\" color=\"black\">\n                صفحة {investorsData.currentPage} من {investorsData.totalPages} - إجمالي {investorsData.totalPartners} مستثمر\n              </Typography>\n            </Box>\n          )}\n\n          {isInvestorsLoading ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n              <CircularProgress />\n            </Box>\n          ) : investorsData?.partners?.length === 0 ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', p: 2, flexDirection: 'column' }}>\n              <Typography variant=\"h6\" color=\"black\" mb={1}>\n                لا توجد مستثمرين\n              </Typography>\n              <Typography variant=\"body2\" color=\"black\">\n                {search || selectedStatus ? 'لم يتم العثور على مستثمرين مطابقين للبحث' : 'لا توجد مستثمرين مسجلين'}\n              </Typography>\n            </Box>\n          ) : investorsData?.partners?.map((investor) => {\n            const isSelected = selectedInvestor?.id === investor.id;\n            return (\n              <Card\n                key={investor.id}\n                onClick={() => handleInvestorSelect(investor)}\n                sx={{\n                  mb: 1,\n                  mx: 2,\n                  mt: 2,\n                  cursor: \"pointer\",\n                  height: '100px',\n                  border: isSelected ? \"2px solid #1E40AF\" : \"1px solid #E5E7EB\",\n                  bgcolor: isSelected ? \"#EEF2FF\" : \"background.paper\",\n                  transition: \"0.2s\",\n                  \"&:hover\": { bgcolor: \"#F3F4F6\" },\n                }}\n              >\n                <CardContent sx={{ p: 2 }}>\n                  <Box\n                    sx={{\n                      display: \"flex\",\n                      justifyContent: \"space-between\",\n                      alignItems: \"center\",\n                    }}\n                  >\n                    <Typography fontWeight=\"bold\">{investor.name}</Typography>\n                    <Chip\n                      label={getStatusText(investor.isActive)}\n                      size=\"small\"\n                      color={getStatusColor(investor.isActive)}\n                    />\n                  </Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    رأس المال: {investor.capitalAmount?.toLocaleString()} ريال\n                  </Typography>\n                  <Box display=\"flex\" justifyContent=\"flex-end\" mt={1}>\n                    <IconButton \n                      size=\"small\" \n                      color=\"error\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        openDeleteModal(investor);\n                      }}\n                    >\n                      <Delete fontSize=\"small\" />\n                    </IconButton>\n                  </Box>\n                </CardContent>\n              </Card>\n            );\n          })}\n          \n          {/* Pagination */}\n          {investorsData && investorsData.totalPages > 1 && (\n            <Box sx={{ \n              display: 'flex', \n              justifyContent: 'center', \n              alignItems: 'center',\n              p: 2, \n              gap: 2,\n              borderTop: '1px solid #eee',\n            }}>\n\n              <Pagination\n                count={investorsData.totalPages}\n                page={currentPage}\n                onChange={handlePageChange}\n                color=\"primary\"\n                size=\"small\"\n                siblingCount={1}\n                boundaryCount={1}\n                sx={{\n                  '& .MuiPaginationItem-root': {\n                    fontSize: '0.875rem',\n                  }\n                }}\n              />\n            </Box>\n          )}\n        </Box>\n\n        {/* Right section – investor details */}\n        {selectedInvestor && investorDetails ? (\n          <Box sx={{ flex: 1, p: 4, bgcolor: \"#fff\", overflowY: \"auto\" }}>\n            <Box\n              sx={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                mb: 3,\n              }}\n            >\n              <Box>\n                <Typography variant=\"h6\" fontWeight=\"bold\">\n                  {investorDetails.name}\n                </Typography>\n                <Typography color=\"text.secondary\">\n                  رقم الهوية: {investorDetails.nationalId}\n                </Typography>\n              </Box>\n              <Box sx={{ display: \"flex\", gap: 2 }}>\n                <Button \n                  variant=\"outlined\" \n                  startIcon={<Edit sx={{marginLeft: '10px'}} />}\n                  onClick={() => setEditMode(!editMode)}\n                >\n                  {editMode ? 'إلغاء التعديل' : 'تعديل'}\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  startIcon={<Save sx={{marginLeft: '10px'}} />}\n                  sx={{ bgcolor: \"#0d40a5\", \"&:hover\": { bgcolor: \"#0b3589\" } }}\n                  disabled={!editMode}\n                  onClick={handleSaveChanges}\n                >\n                  حفظ التغييرات\n                </Button>\n              </Box>\n            </Box>\n\n            {/* Summary Cards */}\n            <Grid container spacing={2} mb={3} sx={{width: '100%'}}>\n              <Grid item xs={12} md={4}>\n                <Card sx={{width: '250px'}}>\n                  <CardContent>\n                    <Typography color=\"text.secondary\" variant=\"body1\">\n                      إجمالي مبلغ الاستثمار\n                    </Typography>\n                    <Typography variant=\"h6\" fontWeight=\"bold\" color=\"success\">\n                      {investorDetails.capitalAmount?.toLocaleString()} ريال\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={12} md={4}>\n                <Card sx={{width: '250px'}}>\n                  <CardContent>\n                    <Typography color=\"text.secondary\" variant=\"body1\">\n                      نسبة أرباح المنشأة\n                    </Typography>\n                    <Typography variant=\"h6\" fontWeight=\"bold\">\n                      {investorDetails.orgProfitPercent}%\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={12} md={4}>\n                <Card sx={{width: '250px'}}>\n                  <CardContent>\n                    <Typography color=\"text.secondary\" variant=\"body1\">\n                      نسبة أرباح المستثمر\n                    </Typography>\n                    <Typography variant=\"h6\" fontWeight=\"bold\">\n                      {investorDetails.partnerProfitPercent}%\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            </Grid>\n\n            {/* Tabs */}\n            <Tabs\n              value={tab}\n              onChange={handleTabChange}\n              textColor=\"primary\"\n              indicatorColor=\"primary\"\n              sx={{ mb: 3 }}\n            >\n              <Tab label=\"التفاصيل الشخصية\" />\n              <Tab label=\"المعلومات المالية\" />\n              <Tab label=\"العمليات المالية\" />\n              <Tab label=\"المستندات\" />\n            </Tabs>\n\n            <Divider sx={{ mb: 3 }} />\n\n            {/* التفاصيل الشخصية */}\n            {tab === 0 && (\n              <Box>\n                <Paper sx={{ p: 3, mb: 3 }}>\n                  <Typography variant=\"h6\" mb={3}>المعلومات الشخصية</Typography>\n                  <Grid container spacing={3}>\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"body2\" mb={1} fontWeight={500}>الاسم الكامل</Typography>\n                      <TextField \n                        value={editMode ? editFormData.name : investorDetails.name} \n                        onChange={(e) => handleInputChange('name', e.target.value)}\n                        fullWidth\n                        disabled={!editMode}\n                        sx={{\n                          '& .MuiOutlinedInput-root': {\n                            backgroundColor: editMode ? '#fff' : '#f9fafb',\n                            borderRadius: '6px',\n                            '&:hover fieldset': {\n                              borderColor: '#0d40a5',\n                            },\n                          },\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"body2\" mb={1} fontWeight={500}>البريد الإلكتروني</Typography>\n                      <TextField \n                        value={editMode ? editFormData.email : investorDetails.email || 'لا يوجد بريد إلكتروني'} \n                        onChange={(e) => handleInputChange('email', e.target.value)}\n                        fullWidth\n                        disabled={!editMode}\n                        sx={{\n                          '& .MuiOutlinedInput-root': {\n                            backgroundColor: editMode ? '#fff' : '#f9fafb',\n                            borderRadius: '6px',\n                            '&:hover fieldset': {\n                              borderColor: '#0d40a5',\n                            },\n                          },\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"body2\" mb={1} fontWeight={500}>رقم الهوية الوطنية</Typography>\n                      <TextField \n                        value={investorDetails.nationalId} \n                        fullWidth\n                        disabled\n                        sx={{\n                          '& .MuiOutlinedInput-root': {\n                            backgroundColor: '#f9fafb',\n                            borderRadius: '6px',\n                          },\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"body2\" mb={1} fontWeight={500}>رقم الجوال</Typography>\n                      <TextField\n                        value={editMode ? editFormData.phone : investorDetails.phone}\n                        onChange={(e) => handleInputChange('phone', e.target.value)}\n                        fullWidth\n                        disabled={!editMode}\n                        sx={{\n                          '& .MuiOutlinedInput-root': {\n                            backgroundColor: editMode ? '#fff' : '#f9fafb',\n                            borderRadius: '6px',\n                            '&:hover fieldset': {\n                              borderColor: '#0d40a5',\n                            },\n                          },\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12}>\n                      <Typography variant=\"body2\" mb={1} fontWeight={500}>العنوان</Typography>\n                      <TextField\n                        value={editMode ? editFormData.address : investorDetails.address}\n                        onChange={(e) => handleInputChange('address', e.target.value)}\n                        fullWidth\n                        disabled={!editMode}\n                        sx={{\n                          '& .MuiOutlinedInput-root': {\n                            backgroundColor: editMode ? '#fff' : '#f9fafb',\n                            borderRadius: '6px',\n                            '&:hover fieldset': {\n                              borderColor: '#0d40a5',\n                            },\n                          },\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"body2\" mb={1} fontWeight={500}>تاريخ الانضمام</Typography>\n                      <TextField\n                        value={investorDetails.createdAt ? new Date(investorDetails.createdAt).toLocaleDateString('en-US') : ''}\n                        fullWidth\n                        disabled\n                        sx={{\n                          '& .MuiOutlinedInput-root': {\n                            backgroundColor: '#f9fafb',\n                            borderRadius: '6px',\n                          },\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"body2\" mb={1} fontWeight={500}>الحالة</Typography>\n                      <TextField\n                        value={getStatusText(investorDetails.isActive)}\n                        fullWidth\n                        disabled\n                        sx={{\n                          '& .MuiOutlinedInput-root': {\n                            backgroundColor: '#f9fafb',\n                            borderRadius: '6px',\n                          },\n                        }}\n                      />\n                    </Grid>\n                  </Grid>\n                </Paper>\n              </Box>\n            )}\n\n            {/* المعلومات المالية */}\n            {tab === 1 && (\n              <Paper sx={{ p: 3 }}>\n                <Typography variant=\"h6\" mb={3}>المعلومات المالية</Typography>\n                <Grid container spacing={3}>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"body2\" mb={1} fontWeight={500}>رأس المال</Typography>\n                    <TextField \n                      value={editMode ? editFormData.capitalAmount : investorDetails.capitalAmount?.toLocaleString()} \n                      onChange={(e) => handleInputChange('capitalAmount', e.target.value)}\n                      fullWidth\n                      disabled={!editMode}\n                      sx={{\n                        '& .MuiOutlinedInput-root': {\n                          backgroundColor: editMode ? '#fff' : '#f9fafb',\n                          borderRadius: '6px',\n                          '&:hover fieldset': {\n                            borderColor: '#0d40a5',\n                          },\n                        },\n                      }}\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"body2\" mb={1} fontWeight={500}>نسبة أرباح المنشأة</Typography>\n                    <TextField \n                      value={editMode ? editFormData.orgProfitPercent : investorDetails.orgProfitPercent} \n                      onChange={(e) => handleInputChange('orgProfitPercent', e.target.value)}\n                      fullWidth\n                      disabled={!editMode}\n                      sx={{\n                        '& .MuiOutlinedInput-root': {\n                          backgroundColor: editMode ? '#fff' : '#f9fafb',\n                          borderRadius: '6px',\n                          '&:hover fieldset': {\n                            borderColor: '#0d40a5',\n                          },\n                        },\n                      }}\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"body2\" mb={1} fontWeight={500}>نسبة أرباح المستثمر</Typography>\n                    <TextField \n                      value={investorDetails.partnerProfitPercent} \n                      fullWidth\n                      disabled\n                      sx={{\n                        '& .MuiOutlinedInput-root': {\n                          backgroundColor: '#f9fafb',\n                          borderRadius: '6px',\n                        },\n                      }}\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"body2\" mb={1} fontWeight={500}>حساب رأس المال</Typography>\n                    <TextField \n                      value={investorDetails.AccountEquity?.name} \n                      fullWidth\n                      disabled\n                      sx={{\n                        '& .MuiOutlinedInput-root': {\n                          backgroundColor: '#f9fafb',\n                          borderRadius: '6px',\n                        },\n                      }}\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"body2\" mb={1} fontWeight={500}>حساب المستحقات</Typography>\n                    <TextField \n                      value={investorDetails.AccountPayable?.name} \n                      fullWidth\n                      disabled\n                      sx={{\n                        '& .MuiOutlinedInput-root': {\n                          backgroundColor: '#f9fafb',\n                          borderRadius: '6px',\n                        },\n                      }}\n                    />\n                  </Grid>\n                </Grid>\n              </Paper>\n            )}\n\n            {/* العمليات المالية */}\n            {tab === 2 && (\n              <Box>\n                {/* Add Transaction Button */}\n                <Box sx={{ mb: 3, display: 'flex', justifyContent: 'flex-end' }}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<Add sx={{ marginLeft: '10px' }} />}\n                    onClick={handleAddTransaction}\n                    sx={{\n                      bgcolor: \"#0d40a5\",\n                      \"&:hover\": { bgcolor: \"#0b3589\" },\n                      fontWeight: \"bold\",\n                    }}\n                  >\n                    إضافة عملية مالية\n                  </Button>\n                </Box>\n\n                {/* Transactions Table */}\n                <Paper sx={{ width: '100%', overflow: 'hidden' }}>\n                  <TableContainer>\n                    <Table stickyHeader>\n                      <TableHead sx={{ bgcolor: \"#F3F4F6\" }}>\n                        <StyledTableRow>\n                          <StyledTableCell align=\"center\" sx={{ fontWeight: \"bold\" }}>رقم المرجع</StyledTableCell>\n                          <StyledTableCell align=\"center\" sx={{ fontWeight: \"bold\" }}>نوع العملية</StyledTableCell>\n                          <StyledTableCell align=\"center\" sx={{ fontWeight: \"bold\" }}>المبلغ</StyledTableCell>\n                          <StyledTableCell align=\"center\" sx={{ fontWeight: \"bold\" }}>التاريخ</StyledTableCell>\n                          <StyledTableCell align=\"center\" sx={{ fontWeight: \"bold\" }}>الإجراءات</StyledTableCell>\n                        </StyledTableRow>\n                      </TableHead>\n                      <TableBody>\n                        {isTransactionsLoading ? (\n                          <StyledTableRow>\n                            <StyledTableCell colSpan={5} align=\"center\">\n                              <CircularProgress size={20} />\n                            </StyledTableCell>\n                          </StyledTableRow>\n                        ) : transactionsData?.transactions?.length === 0 ? (\n                          <StyledTableRow>\n                            <StyledTableCell colSpan={5} align=\"center\">\n                              <Typography>لا توجد عمليات مالية</Typography>\n                            </StyledTableCell>\n                          </StyledTableRow>\n                        ) : (\n                          transactionsData?.transactions?.map((transaction) => (\n                            <StyledTableRow key={transaction.id} hover>\n                              <StyledTableCell align=\"center\">{transaction.reference}</StyledTableCell>\n                              <StyledTableCell align=\"center\">\n                                <Chip\n                                  label={getTransactionTypeText(transaction.type)}\n                                  color={getTransactionTypeColor(transaction.type)}\n                                  size=\"small\"\n                                />\n                              </StyledTableCell>\n                              <StyledTableCell align=\"center\" sx={{ \n                                color: transaction.type === \"DEPOSIT\" ? \"success.main\" : \"error.main\",\n                                fontWeight: \"bold\"\n                              }}>\n                                {transaction.amount?.toLocaleString()} ريال\n                              </StyledTableCell>\n                              <StyledTableCell align=\"center\">\n                                {dayjs(transaction.date).format(\"DD/MM/YYYY HH:mm a\")}\n                              </StyledTableCell>\n                              <StyledTableCell align=\"center\">\n                                <IconButton\n                                  color=\"error\"\n                                  size=\"small\"\n                                  onClick={() => openDeleteTransactionModal(transaction)}\n                                >\n                                  <Delete fontSize=\"small\" />\n                                </IconButton>\n                              </StyledTableCell>\n                            </StyledTableRow>\n                          ))\n                        )}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n\n                  {/* Pagination for Transactions */}\n                  {transactionsData && transactionsData.totalPages > 1 && (\n                    <Box sx={{ \n                      display: 'flex', \n                      justifyContent: 'center', \n                      alignItems: 'center',\n                      p: 2, \n                      borderTop: '1px solid #eee',\n                    }}>\n                      <Pagination\n                        count={transactionsData.totalPages}\n                        page={transactionsPage}\n                        onChange={handleTransactionsPageChange}\n                        color=\"primary\"\n                        size=\"small\"\n                        siblingCount={1}\n                        boundaryCount={1}\n                      />\n                    </Box>\n                  )}\n                </Paper>\n              </Box>\n            )}\n\n            {/* المستندات */}\n            {tab === 3 && (\n              <Box>\n                {/* Existing Documents */}\n                <Box sx={{ mb: 4 }}>\n                  <Typography variant=\"h6\" sx={{ mb: 2 }}>المستندات المرفوعة</Typography>\n                  {investorDetails.mudarabahFileUrl ? (\n                    <Grid container spacing={2}>\n                      <Grid item xs={12}>\n                        <Paper sx={{ p: 2, display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            <CheckCircle color=\"success\" fontSize=\"small\" />\n                            <Box>\n                              <Typography fontWeight=\"500\">عقد المضاربة</Typography>\n                            </Box>\n                          </Box>\n                          <Box>\n                            <IconButton onClick={() => handlePrintFile(investorDetails.mudarabahFileUrl)}>\n                              <Print />\n                            </IconButton>\n                            <IconButton \n                              onClick={() => handleDownloadFile(investorDetails.mudarabahFileUrl)}\n                              title=\"تحميل\"\n                            >\n                              <Download />\n                            </IconButton>\n                            <IconButton \n                              onClick={() => handleShareFile(investorDetails.mudarabahFileUrl)}\n                              title=\"مشاركة\"\n                            >\n                              <Share />\n                            </IconButton>\n                          </Box>\n                        </Paper>\n                      </Grid>\n                    </Grid>\n                  ) : (\n                    <Paper sx={{ p: 3, textAlign: 'center', mb: 3 }}>\n                      <Typography color=\"text.secondary\">لا توجد مستندات مرفوعة</Typography>\n                    </Paper>\n                  )}\n                </Box>\n              </Box>\n            )}\n          </Box>\n        ) : (\n          <Box sx={{ flex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', gap: 2 }}>\n            <Typography variant=\"h6\" color=\"text.secondary\">\n              {selectedInvestor ? 'جاري تحميل البيانات...' : 'اختر مستثمراً لعرض التفاصيل'}\n            </Typography>\n            {selectedInvestor && <CircularProgress size={40} />}\n          </Box>\n        )}\n      </Box>\n\n      {/* Modals */}\n      <AddInvestor\n        open={isAddModalOpen}\n        onClose={() => setIsAddModalOpen(false)}\n        onSuccess={() => {\n          setIsAddModalOpen(false);\n          refetch();\n        }}\n      />\n\n      <DeleteModal\n        open={isDeleteModalOpen}\n        onClose={() => {\n          setIsDeleteModalOpen(false);\n          setInvestorToDelete(null);\n        }}\n        onConfirm={() => {\n          if (investorToDelete?.id) {\n            console.log('Delete button clicked, investor ID:', investorToDelete.id);\n            handleDeleteInvestor(investorToDelete.id);\n          } else {\n            console.error('No investor ID found for deletion');\n          }\n        }}\n        title=\"حذف المستثمر\"\n        message={`هل أنت متأكد من حذف المستثمر ${investorToDelete?.name}؟`}\n        ButtonText=\"حذف\"\n      />\n\n      {/* Add Transaction Modal */}\n      <Dialog \n        open={isTransactionModalOpen} \n        onClose={() => setIsTransactionModalOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          <Typography variant=\"h6\" fontWeight=\"bold\">\n            إضافة عملية مالية\n          </Typography>\n        </DialogTitle>\n        <DialogContent>\n          <Stack spacing={3} sx={{ mt: 2 }}>\n            <FormControl fullWidth size=\"small\">\n              <TextField\n                select\n                label=\"نوع العملية\"\n                value={transactionForm.type}\n                onChange={(e) => handleTransactionInputChange('type', e.target.value)}\n              >\n                <MenuItem value=\"DEPOSIT\">إيداع</MenuItem>\n                <MenuItem value=\"WITHDRAWAL\">سحب</MenuItem>\n              </TextField>\n            </FormControl>\n            \n            <TextField\n              label=\"المبلغ\"\n              type=\"number\"\n              value={transactionForm.amount}\n              onChange={(e) => handleTransactionInputChange('amount', e.target.value)}\n              fullWidth\n            />\n          </Stack>\n        </DialogContent>\n        <DialogActions sx={{ p: 3, flexDirection: 'row-reverse' }}>\n          <Button \n            onClick={() => setIsTransactionModalOpen(false)}\n            color=\"inherit\"\n          >\n            إلغاء\n          </Button>\n          <Button \n            onClick={handleSaveTransaction}\n            variant=\"contained\"\n            sx={{\n              bgcolor: \"#0d40a5\",\n              \"&:hover\": { bgcolor: \"#0b3589\" },\n            }}\n          >\n            حفظ\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Delete Transaction Modal */}\n      <DeleteModal\n        open={isDeleteTransactionModalOpen}\n        onClose={() => {\n          setIsDeleteTransactionModalOpen(false);\n          setTransactionToDelete(null);\n        }}\n        onConfirm={() => {\n          if (transactionToDelete?.id) {\n            handleDeleteTransaction(transactionToDelete.id);\n          }\n        }}\n        title=\"حذف العملية المالية\"\n        message={`هل أنت متأكد من حذف العملية المالية برقم المرجع ${transactionToDelete?.reference}؟`}\n        ButtonText=\"حذف\"\n      />\n    </Box>\n  );\n}"],"names":["ContractPreview","open","onClose","contractHtml","onGeneratePDF","loading","contractTitle","jsxs","Dialog","DialogTitle","jsx","Typography","IconButton","CloseIcon","DialogContent","Paper","Box","Divider","DialogActions","Button","Print","Download","numberToArabicWords","num","ones","tens","teens","hundreds","result","thousandsPart","hundredsPart","tensPart","onesPart","getCurrentDates","now","gregorianDate","hijriYear","hijriDate","ContractGenerator","React","investorData","templateContent","onContractGenerated","contractType","ref","showPreview","setShowPreview","useState","setContractHtml","setLoading","generateContract","useCallback","notifyError","capitalInWords","filledTemplate","error","generatePDF","element","options","pdfBlob","html2pdf","uploadPDFToServer","notifySuccess","handleApiError","formData","Api","Fragment","AddInvestor","onSuccess","setFormData","errors","setErrors","setGenerateContract","savedInvestorData","setSavedInvestorData","mudarabahTemplate","setMudarabahTemplate","contractGeneratorRef","useRef","handleChange","field","event","prev","validateForm","newErrors","fetchMudarabahTemplate","response","handleSubmit","newInvestorData","handleClose","handleContractGenerated","Grid","TextField","FormControlLabel","Checkbox","e","CircularProgress","getInvestors","page","searchQuery","status","queryParams","queryString","url","getInvestorDetails","investorId","getPartnerTransactions","partnerId","createPartnerTransaction","transactionData","deletePartnerTransaction","transactionId","Investors","tab","setTab","search","setSearch","selectedStatus","setSelectedStatus","selectedInvestor","setSelectedInvestor","isAddModalOpen","setIsAddModalOpen","isDeleteModalOpen","setIsDeleteModalOpen","investorToDelete","setInvestorToDelete","editMode","setEditMode","currentPage","setCurrentPage","editFormData","setEditFormData","isTransactionModalOpen","setIsTransactionModalOpen","transactionForm","setTransactionForm","transactionsPage","setTransactionsPage","transactionToDelete","setTransactionToDelete","isDeleteTransactionModalOpen","setIsDeleteTransactionModalOpen","queryClient","useQueryClient","investorsData","isInvestorsLoading","refetch","useQuery","investorDetails","transactionsData","isTransactionsLoading","debouncedSearch","debounce","value","handleSearchChange","handlePageChange","newPage","handleTransactionsPageChange","handleTabChange","newValue","handleInvestorSelect","investor","handleInputChange","handleTransactionInputChange","handleSaveChanges","dataToSend","handleAddInvestor","handleDeleteInvestor","openDeleteModal","handleAddTransaction","handleSaveTransaction","handleDeleteTransaction","openDeleteTransactionModal","transaction","handleDownloadFile","fileUrl","blob","extension","newFileName","saveAs","handlePrintFile","blobUrl","printWindow","handleShareFile","ext","fileName","file","useEffect","getStatusColor","isActive","getStatusText","getTransactionTypeText","type","getTransactionTypeColor","Add","InputAdornment","Search","Chip","isSelected","Card","CardContent","Delete","Pagination","Edit","Save","Tabs","Tab","TableContainer","Table","TableHead","StyledTableRow","StyledTableCell","TableBody","dayjs","CheckCircle","Share","DeleteModal","Stack","FormControl","MenuItem"],"mappings":"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"}